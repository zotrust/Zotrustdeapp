import{k as f,t as _,i as A,I as N}from"./isAddress-B_bhZto5.js";import{ah as c,aN as u,ad as O,aO as k,ae as g,aP as h,aQ as ee,aR as te,aS as E,aT as ne,aU as re,ai as C}from"./index-B1f6toGc.js";function se(e,t){const n=e.exec(t);return n==null?void 0:n.groups}const Ze=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Je=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,Qe=/^\(.+?\).*?$/,F=/^tuple(?<array>(\[(\d*)\])*)$/;function w(e){let t=e.type;if(F.test(e.type)&&"components"in e){t="(";const n=e.components.length;for(let s=0;s<n;s++){const o=e.components[s];t+=w(o),s<n-1&&(t+=", ")}const r=se(F,e.type);return t+=`)${(r==null?void 0:r.array)??""}`,w({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function b(e){let t="";const n=e.length;for(let r=0;r<n;r++){const s=e[r];t+=w(s),r!==n-1&&(t+=", ")}return t}function oe(e){var t;return e.type==="function"?`function ${e.name}(${b(e.inputs)})${e.stateMutability&&e.stateMutability!=="nonpayable"?` ${e.stateMutability}`:""}${(t=e.outputs)!=null&&t.length?` returns (${b(e.outputs)})`:""}`:e.type==="event"?`event ${e.name}(${b(e.inputs)})`:e.type==="error"?`error ${e.name}(${b(e.inputs)})`:e.type==="constructor"?`constructor(${b(e.inputs)})${e.stateMutability==="payable"?" payable":""}`:e.type==="fallback"?`fallback() external${e.stateMutability==="payable"?" payable":""}`:"receive() external payable"}function x(e,{includeName:t=!1}={}){if(e.type!=="function"&&e.type!=="event"&&e.type!=="error")throw new ye(e.type);return`${e.name}(${$(e.inputs,{includeName:t})})`}function $(e,{includeName:t=!1}={}){return e?e.map(n=>ie(n,{includeName:t})).join(t?", ":","):""}function ie(e,{includeName:t}){return e.type.startsWith("tuple")?`(${$(e.components,{includeName:t})})${e.type.slice(5)}`:e.type+(t&&e.name?` ${e.name}`:"")}class Ke extends c{constructor({docsPath:t}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:t,name:"AbiConstructorNotFoundError"})}}class Xe extends c{constructor({docsPath:t}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:t,name:"AbiConstructorParamsNotFoundError"})}}class _e extends c{constructor({data:t,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${$(n,{includeName:!0})})`,`Data:   ${t} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t,this.params=n,this.size=r}}class et extends c{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class ae extends c{constructor({expectedLength:t,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${t}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class ce extends c{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${u(n)}) does not match expected size (bytes${t}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class ue extends c{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${t}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class tt extends c{constructor(t,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${t}", but "${t}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class nt extends c{constructor(t,{docsPath:n}={}){super([`Error ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class rt extends c{constructor(t,{docsPath:n}){super([`Encoded error signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=t}}class st extends c{constructor({docsPath:t}){super("Cannot extract event signature from empty topics.",{docsPath:t,name:"AbiEventSignatureEmptyTopicsError"})}}class ot extends c{constructor(t,{docsPath:n}){super([`Encoded event signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class it extends c{constructor(t,{docsPath:n}={}){super([`Event ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class P extends c{constructor(t,{docsPath:n}={}){super([`Function ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class at extends c{constructor(t,{docsPath:n}){super([`Function "${t}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class ct extends c{constructor(t,{docsPath:n}){super([`Encoded function signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class de extends c{constructor(t,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${t.type}\` in \`${x(t.abiItem)}\`, and`,`\`${n.type}\` in \`${x(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class fe extends c{constructor({expectedSize:t,givenSize:n}){super(`Expected bytes${t}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}}class ut extends c{constructor({abiItem:t,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${$(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t,this.data=n,this.params=r,this.size=s}}class dt extends c{constructor({abiItem:t,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${x(t,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t}}class pe extends c{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class ft extends c{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}class le extends c{constructor(t){super([`Value "${t}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class ye extends c{constructor(t){super([`"${t}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}const he=e=>f(_(e));function ge(e){return he(e)}function me(e){let t=!0,n="",r=0,s="",o=!1;for(let a=0;a<e.length;a++){const i=e[a];if(["(",")",","].includes(i)&&(t=!0),i==="("&&r++,i===")"&&r--,!!t){if(r===0){if(i===" "&&["event","function",""].includes(s))s="";else if(s+=i,i===")"){o=!0;break}continue}if(i===" "){e[a-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}s+=i,n+=i}}if(!o)throw new c("Unable to normalize signature.");return s}const be=e=>{const t=typeof e=="string"?e:oe(e);return me(t)};function L(e){return ge(be(e))}const Ae=L;function p(e){return typeof e[0]=="string"?H(e):xe(e)}function xe(e){let t=0;for(const s of e)t+=s.length;const n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}function H(e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function R(e,t,n,{strict:r}={}){return O(e,{strict:!1})?Ee(e,t,n,{strict:r}):$e(e,t,n,{strict:r})}function W(e,t){if(typeof t=="number"&&t>0&&t>u(e)-1)throw new k({offset:t,position:"start",size:u(e)})}function V(e,t,n){if(typeof t=="number"&&typeof n=="number"&&u(e)!==n-t)throw new k({offset:n,position:"end",size:u(e)})}function $e(e,t,n,{strict:r}={}){W(e,t);const s=e.slice(t,n);return r&&V(s,t,n),s}function Ee(e,t,n,{strict:r}={}){W(e,t);const s=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return r&&V(s,t,n),s}const we=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,U=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function I(e,t){if(e.length!==t.length)throw new ue({expectedLength:e.length,givenLength:t.length});const n=ve({params:e,values:t}),r=T(n);return r.length===0?"0x":r}function ve({params:e,values:t}){const n=[];for(let r=0;r<e.length;r++)n.push(S({param:e[r],value:t[r]}));return n}function S({param:e,value:t}){const n=Fe(e.type);if(n){const[r,s]=n;return Se(t,{length:r,param:{...e,type:s}})}if(e.type==="tuple")return ze(t,{param:e});if(e.type==="address")return Ie(t);if(e.type==="bool")return Me(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){const r=e.type.startsWith("int"),[,,s="256"]=U.exec(e.type)??[];return Be(t,{signed:r,size:Number(s)})}if(e.type.startsWith("bytes"))return Te(t,{param:e});if(e.type==="string")return De(t);throw new pe(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function T(e){let t=0;for(let o=0;o<e.length;o++){const{dynamic:a,encoded:i}=e[o];a?t+=32:t+=u(i)}const n=[],r=[];let s=0;for(let o=0;o<e.length;o++){const{dynamic:a,encoded:i}=e[o];a?(n.push(g(t+s,{size:32})),r.push(i),s+=u(i)):n.push(i)}return p([...n,...r])}function Ie(e){if(!A(e))throw new N({address:e});return{dynamic:!1,encoded:h(e.toLowerCase())}}function Se(e,{length:t,param:n}){const r=t===null;if(!Array.isArray(e))throw new le(e);if(!r&&e.length!==t)throw new ae({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let s=!1;const o=[];for(let a=0;a<e.length;a++){const i=S({param:n,value:e[a]});i.dynamic&&(s=!0),o.push(i)}if(r||s){const a=T(o);if(r){const i=g(o.length,{size:32});return{dynamic:!0,encoded:o.length>0?p([i,a]):i}}if(s)return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:p(o.map(({encoded:a})=>a))}}function Te(e,{param:t}){const[,n]=t.type.split("bytes"),r=u(e);if(!n){let s=e;return r%32!==0&&(s=h(s,{dir:"right",size:Math.ceil((e.length-2)/2/32)*32})),{dynamic:!0,encoded:p([h(g(r,{size:32})),s])}}if(r!==Number.parseInt(n,10))throw new ce({expectedSize:Number.parseInt(n,10),value:e});return{dynamic:!1,encoded:h(e,{dir:"right"})}}function Me(e){if(typeof e!="boolean")throw new c(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:h(ee(e))}}function Be(e,{signed:t,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(t?1n:0n))-1n,s=t?-r-1n:0n;if(e>r||e<s)throw new te({max:r.toString(),min:s.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:g(e,{size:32,signed:t})}}function De(e){const t=E(e),n=Math.ceil(u(t)/32),r=[];for(let s=0;s<n;s++)r.push(h(R(t,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:p([h(g(u(t),{size:32})),...r])}}function ze(e,{param:t}){let n=!1;const r=[];for(let s=0;s<t.components.length;s++){const o=t.components[s],a=Array.isArray(e)?s:o.name,i=S({param:o,value:e[a]});r.push(i),i.dynamic&&(n=!0)}return{dynamic:n,encoded:n?T(r):p(r.map(({encoded:s})=>s))}}function Fe(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}const q=e=>R(L(e),0,4);function Pe(e){const{abi:t,args:n=[],name:r}=e,s=O(r,{strict:!1}),o=t.filter(i=>s?i.type==="function"?q(i)===r:i.type==="event"?Ae(i)===r:!1:"name"in i&&i.name===r);if(o.length===0)return;if(o.length===1)return o[0];let a;for(const i of o){if(!("inputs"in i))continue;if(!n||n.length===0){if(!i.inputs||i.inputs.length===0)return i;continue}if(!i.inputs||i.inputs.length===0||i.inputs.length!==n.length)continue;if(n.every((l,y)=>{const d="inputs"in i&&i.inputs[y];return d?v(l,d):!1})){if(a&&"inputs"in a&&a.inputs){const l=Y(i.inputs,a.inputs,n);if(l)throw new de({abiItem:i,type:l[0]},{abiItem:a,type:l[1]})}a=i}}return a||o[0]}function v(e,t){const n=typeof e,r=t.type;switch(r){case"address":return A(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((s,o)=>v(Object.values(e)[o],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(s=>v(s,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function Y(e,t,n){for(const r in e){const s=e[r],o=t[r];if(s.type==="tuple"&&o.type==="tuple"&&"components"in s&&"components"in o)return Y(s.components,o.components,n[r]);const a=[s.type,o.type];if(a.includes("address")&&a.includes("bytes20")?!0:a.includes("address")&&a.includes("string")?A(n[r],{strict:!1}):a.includes("address")&&a.includes("bytes")?A(n[r],{strict:!1}):!1)return a}}const j="/docs/contract/encodeFunctionData";function je(e){const{abi:t,args:n,functionName:r}=e;let s=t[0];if(r){const o=Pe({abi:t,args:n,name:r});if(!o)throw new P(r,{docsPath:j});s=o}if(s.type!=="function")throw new P(void 0,{docsPath:j});return{abi:[s],functionName:q(x(s))}}function pt(e){const{args:t}=e,{abi:n,functionName:r}=(()=>{var i;return e.abi.length===1&&((i=e.functionName)!=null&&i.startsWith("0x"))?e:je(e)})(),s=n[0],o=r,a="inputs"in s&&s.inputs?I(s.inputs,t??[]):void 0;return H([o,a??"0x"])}const Ne=`Ethereum Signed Message:
`;function Oe(e){const t=typeof e=="string"?E(e):typeof e.raw=="string"?e.raw:ne(e.raw),n=E(`${Ne}${u(t)}`);return p([n,t])}function lt(e,t){return f(Oe(e),t)}class ke extends c{constructor({domain:t}){super(`Invalid domain "${re(t)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class Ce extends c{constructor({primaryType:t,types:n}){super(`Invalid primary type \`${t}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class Le extends c{constructor({type:t}){super(`Struct type "${t}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function He(e){const{domain:t,message:n,primaryType:r,types:s}=e,o=(a,i)=>{for(const M of a){const{name:l,type:y}=M,d=i[l],B=y.match(U);if(B&&(typeof d=="number"||typeof d=="bigint")){const[K,m,X]=B;g(d,{signed:m==="int",size:Number.parseInt(X,10)/8})}if(y==="address"&&typeof d=="string"&&!A(d))throw new N({address:d});const D=y.match(we);if(D){const[K,m]=D;if(m&&u(d)!==Number.parseInt(m,10))throw new fe({expectedSize:Number.parseInt(m,10),givenSize:u(d)})}const z=s[y];z&&(We(y),o(z,d))}};if(s.EIP712Domain&&t){if(typeof t!="object")throw new ke({domain:t});o(s.EIP712Domain,t)}if(r!=="EIP712Domain")if(s[r])o(s[r],n);else throw new Ce({primaryType:r,types:s})}function Re({domain:e}){return[typeof(e==null?void 0:e.name)=="string"&&{name:"name",type:"string"},(e==null?void 0:e.version)&&{name:"version",type:"string"},(typeof(e==null?void 0:e.chainId)=="number"||typeof(e==null?void 0:e.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(e==null?void 0:e.verifyingContract)&&{name:"verifyingContract",type:"address"},(e==null?void 0:e.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function We(e){if(e==="address"||e==="bool"||e==="string"||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new Le({type:e})}function yt(e){const{domain:t={},message:n,primaryType:r}=e,s={EIP712Domain:Re({domain:t}),...e.types};He({domain:t,message:n,primaryType:r,types:s});const o=["0x1901"];return t&&o.push(Ve({domain:t,types:s})),r!=="EIP712Domain"&&o.push(G({data:n,primaryType:r,types:s})),f(p(o))}function Ve({domain:e,types:t}){return G({data:e,primaryType:"EIP712Domain",types:t})}function G({data:e,primaryType:t,types:n}){const r=Z({data:e,primaryType:t,types:n});return f(r)}function Z({data:e,primaryType:t,types:n}){const r=[{type:"bytes32"}],s=[Ue({primaryType:t,types:n})];for(const o of n[t]){const[a,i]=Q({types:n,name:o.name,type:o.type,value:e[o.name]});r.push(a),s.push(i)}return I(r,s)}function Ue({primaryType:e,types:t}){const n=C(qe({primaryType:e,types:t}));return f(n)}function qe({primaryType:e,types:t}){let n="";const r=J({primaryType:e,types:t});r.delete(e);const s=[e,...Array.from(r).sort()];for(const o of s)n+=`${o}(${t[o].map(({name:a,type:i})=>`${i} ${a}`).join(",")})`;return n}function J({primaryType:e,types:t},n=new Set){const r=e.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||t[s]===void 0)return n;n.add(s);for(const o of t[s])J({primaryType:o.type,types:t},n);return n}function Q({types:e,name:t,type:n,value:r}){if(e[n]!==void 0)return[{type:"bytes32"},f(Z({data:r,primaryType:n,types:e}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},f(r)];if(n==="string")return[{type:"bytes32"},f(C(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),o=r.map(a=>Q({name:t,type:s,types:e,value:a}));return[{type:"bytes32"},f(I(o.map(([a])=>a),o.map(([,a])=>a)))]}return[{type:n},r]}export{Oe as $,it as A,ct as B,nt as C,dt as D,tt as E,le as F,p as G,b as H,ft as I,oe as J,Ne as K,ae as L,ce as M,ue as N,fe as O,pe as P,ye as Q,ke as R,Ce as S,Le as T,je as U,xe as V,Ee as W,L as X,be as Y,Ve as Z,G as _,yt as a,Re as a0,He as a1,se as b,Ze as c,Je as d,pt as e,x as f,Pe as g,lt as h,Qe as i,I as j,et as k,_e as l,Fe as m,R as n,q as o,rt as p,H as q,st as r,$e as s,Ae as t,ot as u,ut as v,P as w,at as x,Ke as y,Xe as z};
